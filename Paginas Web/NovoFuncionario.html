<!DOCTYPE html>

<head>
	<title>Pagina Inicial</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</head>

<script src=
"https://code.jquery.com/jquery-3.5.1.js">
    </script>







		<div class="container ">


		<div class="row ">
			     <div class="  w-100 p-3" style="background-color: #eee;">
            Jessica Helena Marques 2016341
             <br>
             Melve Mavie 2013122
             <br>
             <br>
             <br>
			      <p class="text-center">Registar  Um funcionario
	 		       <br>
		           Base de Dados II 
			     </div>
		</div>	     
	 </div>
	 </div>

	 <form class="w-75 mx-auto" style="margin-top:70px">
  <div class="form-row" >
    <div class="form-group col-md-6" >
      <label for="inputEmail4">Nome do Funcionario</label>
      <input type="text" class="form-control" id="input1" placeholder="Nome">
    </div>
    <div class="form-group col-md-6">
      <label for="inputPassword4">data de Nascimento</label>
      <input type="date" class="form-control" id="data_n">
    </div>
  </div>
  <div class="form-row">
	  <div class="form-group col-md-6">
	    <label for="inputAddress">Morada</label>
	    <input type="text" class="form-control" id="inputAddress" placeholder="">
	  </div>
	  <div class="form-group col-md-6">
	    <label for="inputBI">Numero de BI</label>
	    <input type="text" class="form-control" id="inputBI" >
	  </div>
  </div>	  
  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="inputCity">Categoria de Funcionario</label>
      <input type="text" class="form-control" id="inputCat">
      <label for="inputs">Salario</label>
      <input type="text" class="form-control" id="inputs">
    </div>
    
   
  </div>
  <div class="form-group">
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="gridCheck">
      <label class="form-check-label" for="gridCheck">
        Confirma?
      </label>
    </div>
  </div>
  <BUTTON id="botao"> Adicionar Funcionario</BUTTON>
  <a href="index.html" class="btn btn-primary">Pagina Principal</a>
  <br>
  <p id="est">
</div>	
	

</body>

<Script>

  /* fetch('http://127.0.0.1:8080/bd/getIndividuos', {
    method: 'GET',
    headers: {
        'Accept': 'application/json',
    },
})
.then(response => response.json())
.then(response => { console.log(JSON.stringify(response)) })*/
  


  document.getElementById("botao").addEventListener("click", function(){
  var nome,dn,bi,morada,salario,nomecat;

    nome=document.getElementById("input1").value
    dn=document.getElementById("data_n").value
    bi=document.getElementById("inputBI").value
    morada=document.getElementById("inputAddress").value
    salario=document.getElementById("inputs").value
    nomecat=document.getElementById("inputCat").value
   jQuery.ajax ({
    url: 'http://127.0.0.1:8080/bd/newIndividuo/funcionario',
    type: "POST",
    data: JSON.stringify({
  "nome":nome,
  "data_nascimento":dn,
  "numero_BI":bi,
  "morada":morada,
   "funcionario": [
       {
           "salario_base":Number(salario),
           "categoria":{
               "nome":nomecat
           }
       }
   ]
   
}),
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function(){
        document.getElementById("est").innerHTML = "Funcionario Adicionado com Sucesso";
    }})})



</Script>

</html>